# Maintainer: Aren <aren@peacevolution.org>
# Contributor: Clayton Craft <clayton@craftyguy.net>

pkgname=superd
pkgver=0.5.1
pkgrel=1
pkgdesc='lightweight user service supervising daemon'
url='https://sr.ht/~craftyguy/superd'
arch=('x86_64' 'i686' 'armv7h' 'aarch64')
license=('GPL3')
makedepends=('go' 'scdoc')
source=("$pkgname-$pkgver.tar.gz::https://git.sr.ht/~craftyguy/superd/archive/$pkgver.tar.gz")

build() {
	cd "$pkgname-$pkgver"
	unset LDFLAGS # passed as go linker flags and invalid
	make PREFIX='/usr' VERSION='$pkgver'
}

check() {
	cd "$pkgname-$pkgver"
	go test ./...
}

package() {
	cd "$pkgname-$pkgver"
	make PREFIX='/usr' DESTDIR="$pkgdir" install
}
sha512sums=('4d57c014b258283256fac432aadf63b0935035525fa3b23f301daa169338976c022697aceaf43a296a3e5161bee374ffaa61c73009ffbc9af6f65145d7caf738')
