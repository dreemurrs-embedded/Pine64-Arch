# Maintainer: Aren <aren@peacevolution.org>
# Contributor: Clayton Craft <clayton@craftyguy.net>

pkgname=superd
pkgver=0.6.0
pkgrel=1
pkgdesc='lightweight user service supervising daemon'
url='https://sr.ht/~craftyguy/superd'
arch=('x86_64' 'i686' 'armv7h' 'aarch64')
license=('GPL3')
makedepends=('go' 'scdoc')
source=("$pkgname-$pkgver.tar.gz::https://git.sr.ht/~craftyguy/superd/archive/$pkgver.tar.gz")

build() {
	cd "$pkgname-$pkgver"
	unset LDFLAGS # passed as go linker flags and invalid
	make PREFIX='/usr' VERSION='$pkgver'
}

check() {
	cd "$pkgname-$pkgver"
	go test ./...
}

package() {
	cd "$pkgname-$pkgver"
	make PREFIX='/usr' DESTDIR="$pkgdir" install
}
sha512sums=('53e04ea142c6657bba133744f514f067a772b0a0e3ea7abd55f75050a7684d8a83442fa083799e38399f78829aec844b49d0ba024f77d55d982d27b42d39963a')
